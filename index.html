<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Antarctic Monitor</title>

  <!-- 10ÂàÜ„Åî„Å®„Å´„Éö„Éº„Ç∏Ëá™‰Ωì„ÇÇÊõ¥Êñ∞Ôºà‰øùÈô∫Ôºâ -->
  <meta http-equiv="refresh" content="600">

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      background: #f6f8fa;
      color: #1f2933;
    }

    header {
      background: #0b3d91;
      color: white;
      padding: 2.5rem 2rem;
    }

    header h1 {
      margin: 0;
      font-size: 2rem;
    }

    header p {
      margin-top: 0.5rem;
      font-size: 1rem;
      opacity: 0.9;
    }

    .container {
      padding: 2rem;
      max-width: 1100px;
      margin: auto;
    }

    .status {
      background: #e8f1ff;
      border-left: 5px solid #0b3d91;
      padding: 1rem 1.2rem;
      margin-bottom: 2rem;
      font-size: 0.95rem;
    }

    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .card {
      background: white;
      border-radius: 8px;
      padding: 1.4rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.1);
    }

    .card h2 {
      margin-top: 0;
      font-size: 1.1rem;
    }

    .card p {
      font-size: 0.95rem;
      color: #444;
    }

    .card a {
      display: inline-block;
      margin-top: 0.8rem;
      color: #0b3d91;
      font-weight: 600;
      text-decoration: none;
    }

    .card a:hover {
      text-decoration: underline;
    }

    footer {
      margin-top: 3rem;
      padding: 1.5rem 2rem;
      border-top: 1px solid #ddd;
      font-size: 0.85rem;
      color: #666;
      background: #fff;
    }
  </style>
</head>

<body>

<header>
  <h1>Antarctic Monitor</h1>
  <p>Near-real-time monitoring for Antarctic field observations</p>
</header>

<div class="container">

  <div class="status">
    <strong>Live Status</strong><br>
    Makabe Buoy (JARE67): <span id="last-update">loading‚Ä¶</span>
  </div>

  <div class="cards">

    <div class="card">
      <h2>üß≠ Makabe Buoy (JARE67)</h2>
      <p>
        Near-real-time GPS tracking of the Makabe buoy deployed during JARE67.
      </p>
      <a href="makabe-buoy/">View latest map ‚Üí</a>
    </div>

    <div class="card">
      <h2>üåä Dynamic Ocean Topography</h2>
      <p>
        Satellite-derived sea surface height and large-scale circulation signals.
      </p>
      <a href="ssh-monitor/">Explore DOT ‚Üí</a>
    </div>

    <div class="card">
      <h2>üå°Ô∏è Sea Surface Temperature</h2>
      <p>
        Microwave and infrared SST products for polar oceans.
      </p>
      <a href="sst/">Browse SST ‚Üí</a>
    </div>

  </div>

</div>

<footer>
  Data are preliminary and subject to quality control.<br>
  This site is intended for research and monitoring purposes.
</footer>

<script>
  // ===============================
  // Makabe Buoy „ÅÆÊúÄÊñ∞ÊôÇÂàª„Çí CSV „Åã„ÇâÂèñÂæó
  // ===============================
  fetch("makabe-buoy/buoy_track.csv?t=" + Date.now())
    .then(r => r.text())
    .then(t => {
      const lines = t.trim().split("\n");
      if (lines.length < 2) throw new Error("no data");

      const header = lines[0].split(",");
      const last = lines[lines.length - 1].split(",");

      const timeIndex = header.indexOf("time_utc");
      const momsnIndex = header.indexOf("momsn");

      if (timeIndex < 0) throw new Error("time column missing");

      let msg = last[timeIndex] + " UTC";
      if (momsnIndex >= 0) {
        msg += " (Iridium MOMSN " + last[momsnIndex] + ")";
      }

      document.getElementById("last-update").textContent = msg;
    })
    .catch(() => {
      document.getElementById("last-update").textContent = "unavailable";
    });
</script>

</body>
</html>
